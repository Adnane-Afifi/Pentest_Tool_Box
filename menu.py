import subprocess
import os


def agreement_warning():
    m_warning = '''\033[91m
                                                       WARNING:
                                               --------------------------- 
               The use of this toolbox for unauthorized penetration testing or any illegal activity is strictly 
               prohibited and could result in criminal charges. It is the user's responsibility to ensure that they have proper 
               authorization and use this toolbox for lawful purposes only. Use of this toolbox for any unauthorized 
               or illegal activity is strictly prohibited and could result in criminal charges.
               By using this toolbox, the user acknowledges and accepts these terms and conditions.
               '''
    print(m_warning)
    user_input = input("\033[32mDo you agree to the terms and conditions? (yes/no): ")
    if user_input.lower() == "yes":
        print("\033[0m Proceeding with toolbox usage...")
        display_banner()
    else:
        print("Exiting toolbox...")
        exit()


def display_banner():
    banner = '''
        \033[1m\033[32m
        ██████╗  ██████╗  ██████╗ ████████╗███████╗██████╗ ███████╗███████╗
        ██╔══██╗██╔═══██╗██╔═══██╗╚══██╔══╝██╔════╝██╔══██╗██╔════╝██╔════╝
        ██████╔╝██║   ██║██║   ██║   ██║   █████╗  ██████╔╝█████╗  ███████╗
        ██╔══██╗██║   ██║██║   ██║   ██║   ██╔══╝  ██╔══██╗██╔══╝  ╚════██║
        ██████╔╝╚██████╔╝╚██████╔╝   ██║   ███████╗██║  ██║███████╗███████║
        ╚═════╝  ╚═════╝  ╚═════╝    ╚═╝   ╚══════╝╚═╝  ╚═╝╚══════╝╚══════╝
        BY ADNANE AFIFI & Romain Jeremy
        \033[0m
        '''
    print(banner)
    menu_options()
    handle_user_input()


def handle_user_input():
    options = {
        '1': get_reconnaissance,
        '2': get_enumeration,
        '3': get_osint,
        '4': get_scanning,
        '5': get_post_exploitation,
        '6': exit
    }
    m_input = input("\033[32mEnter your choice:  \033[0m ")
    if m_input in options:
        print(options[m_input])
        options[m_input]()
    else:
        print("Invalid choice")


def menu_options():
    displayInfo = """
          1   - Reconaissance 
          2   - Enumeration
          3   - OSINT
          4   - Scanning
          5   - Post_Exploitation 
          6   - Exit
         """
    print(displayInfo)


def get_reconnaissance():
    # password = input("Enter your password: ")
    subprocess.run(["python3", "./Crecon/main.py"])


def get_enumeration():
    subprocess.run(["python3", "./CENUM/main.py"])

    # require sudo privelege and have to find a way to run it


def get_scanning():
    subprocess.run(["python3", "./CSCAN/main.py"])


def get_osint():
    subprocess.run(["python3", "./COSINT/main.py"])


def get_post_exploitation():
    subprocess.run(["python3", "./main.py"])


def display_menu():
    agreement_warning()


if __name__ == '__main__':
    display_menu()
