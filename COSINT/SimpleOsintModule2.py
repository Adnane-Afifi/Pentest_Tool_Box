import requests
import re
from bs4 import BeautifulSoup
import time
import datetime


def extract_urls(url):
    content = requests.get(url).text
    matches = re.findall(r'http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+', content)
    return matches


def extract_phone_numbers(url):
    phone_regex = re.compile(r'(\d{3})-(\d{3})-(\d{4})')
    webPage = BeautifulSoup(requests.get(url).text, 'html.parser')
    matches = webPage.find_all(text=phone_regex)
    for match in matches:
        print("Found phone number : {match[0]}~{match[1]}~{match[2]}")
    return matches


# Object can be : url ,phone number ,name every information that we can extract from the url.
def save_output_file_format(objects):
    timestamp = time.strftime("%Y-%m-%d-%H-%M-%S")
    with open(f"outputExtracted{timestamp}.txt", "w") as file:
        for single_object in objects:
            file.write(single_object + "\n")


# Object can be : url ,phone number ,name every information that we can extract from the url.
def save_ouput_html_format(objects):
    timestamp = time.strftime("%Y-%m-%d-%H-%M-%S")
    html_string = "<html>\n<body>\n<ul>\n"
    for single_object in objects:
        html_string += "<li> <a href='{}'>{}</a> </li>\n".format(single_object, single_object)
    html_string += "</ul>\n</body>\n</html>"
    with open(f"urls{timestamp}.html", "w") as file:
        file.write(html_string)


urls = extract_urls('https://facebook.com')
print(urls)
